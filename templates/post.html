{% extends "base.html" %}


{% block title %}
    {{ post.name }}
{% endblock %}

{% block style %}
    <style type="text/css">
        .co-delete {
            position: inherit;
            float: right;
        }
    </style>
{% endblock %}

{% block main_content_body %}
    <div class="templatemo-content-container">
    <div class="templatemo-flex-row flex-content-row">
        <div class="templatemo-content-widget white-bg col-2">
            {% if is_admin or post.is_author(current_user) %}
                <a href="/post/delete/{{ post.id }}"><i class="fa fa-times"></i></a>
            {% endif %}

            <div class="square"></div>
            <h2 class="templatemo-inline-block">{{ post.link | safe }}</h2>
            <hr>
            <p>{{ post.author_link | safe }} 发表于: {{ post.time }}</p>
            <p>{{ post.content }}</p>
        </div>
        <div class="templatemo-content-widget white-bg col-2">
            {% for c in post.comment_list %}
                <p>
                    {{ c.user_link | safe }}: {{ c.content }}
                    {% if is_admin or c.is_author(current_user) %}
                        <a href="/comment/delete/{{ c.id }}"><i class="fa fa-times co-delete"></i></a>
                    {% endif %}
                </p>
            {% endfor %}
        </div>
    </div>
    {% if current_user is not none %}
        <form action="/comment/add" method="POST" class="col-lg-12 form-group">
            <fieldset>
                <label for="id-text-post-title"></label>
                <textarea class="form-control" id="id-text-write-comment" rows="3" placeholder="添加评论..." name="content"
                          required></textarea>
                <input type="hidden" name="post_id" value="{{ post.id }}">
                <button type="submit" class="templatemo-blue-button float-right">评 论</button>
            </fieldset>
        </form>
    {% endif %}
{% endblock %}

{#<!DOCTYPE html>#}
{#<html lang="en">#}
{#<head>#}
{#    <meta charset="UTF-8">#}
{#    <title>Post</title>#}
{#    <meta name="viewport" content="width=device-width, initial-scale=1">#}
{#    <link href="//cdn.bootcss.com/bootstrap/4.0.0-alpha.2/css/bootstrap.css" rel="stylesheet">#}
{#    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">#}
{#</head>#}
{#<body>#}
{#    <p>{{ post.title }}</p>#}
{#    <p>{{ post.content }}</p>#}
{#    <p>{{ post.created_time }}</p>#}
{#    <p>{{ post.channel }}</p>#}
{#    {% for c in post.comment_list() %}#}
{#    <p>#}
{#        {{ c.user_link | safe }}: {{ c.content }}#}
{#        {% if is_admin or c.is_author(user) %}#}
{#        <a href="/comment/delete/{{ c.id }}">删除评论</a>#}
{#        {% endif %}#}
{#    </p>#}
{#    {% endfor %}#}
{#    {% if user is not none %}#}
{#        <form action="/comment/add" method="POST" class="pure-form pure-form-aligned">#}
{#            <fieldset>#}
{#                <textarea class="text-link pure-input-1-2" placeholder="添加评论..." name="content" required></textarea>#}
{#                <input type="hidden" name="post_id" value="{{ post.id }}">#}
{#                <button type="submit" class="button-submit pure-button pure-button-primary">提交</button>#}
{#            </fieldset>#}
{#        </form>#}
{#    {% endif %}#}
{#</body>#}
{#</html>#}